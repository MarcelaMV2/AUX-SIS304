CREATE DATABASE REPUESTOS
CHARACTER SET utf8 COLLATE utf8_general_ci;

USE REPUESTOS; 

CREATE TABLE REPUESTO (     
CODIGO  CHAR(6) NOT NULL PRIMARY KEY,                   
DESCRIPCION VARCHAR(35) DEFAULT ' ',                
NUMSERIE INT(8) DEFAULT 0        
) ENGINE = InnoDB; 

CREATE TABLE ELECTRICO (     
CODIGO CHAR(6) NOT NULL PRIMARY KEY,                   
POTENCIA INT(6) DEFAULT 0,
FOREIGN KEY (CODIGO) REFERENCES REPUESTO(CODIGO)            
) ENGINE = InnoDB; 

CREATE TABLE MECANICO (     
CODIGO CHAR(6) NOT NULL PRIMARY KEY,                   
ESPECIFICACION VARCHAR(40) DEFAULT ' ',
FOREIGN KEY (CODIGO) REFERENCES REPUESTO(CODIGO)      
) ENGINE = InnoDB; 

CREATE TABLE PROVEEDOR (     
NIT CHAR(10) NOT NULL PRIMARY KEY,                   
NOMBREP VARCHAR(35) DEFAULT ' ',                
CELULAR INT(8)
) ENGINE = InnoDB; 

CREATE TABLE COMPRA (     
CODIGO CHAR(6) NOT NULL, 
NIT CHAR(10) NOT NULL,     
FECHA DATETIME DEFAULT NOW(),                        
CANTIDAD INT(4) DEFAULT 0,
COSTO FLOAT(6,2) DEFAULT 0.0,
DESCUENTO FLOAT(6,2) DEFAULT 0.0,
IMPUESTO FLOAT(6,2) DEFAULT 0.0,
PRIMARY KEY(CODIGO, NIT),
FOREIGN KEY (CODIGO) REFERENCES REPUESTO(CODIGO),
FOREIGN KEY (NIT) REFERENCES PROVEEDOR(NIT)
) ENGINE = InnoDB; 

CREATE TABLE ENCARGADO (     
ITEM INT(6) NOT NULL PRIMARY KEY,                   
NOMBRE VARCHAR(35) DEFAULT ' ',                
TELEFONO INT(8),
CIUDAD VARCHAR(15) DEFAULT ' '
) ENGINE = InnoDB; 

CREATE TABLE ENTREGA (     
NE INT(4) NOT NULL PRIMARY KEY,        
FECHAE DATETIME DEFAULT NOW(),                    
CANTIDADE INT(4) DEFAULT 0, 
CODIGO CHAR(6),  
NIT CHAR(10),
ITEM INT(6),
FOREIGN KEY (CODIGO, NIT) REFERENCES COMPRA(CODIGO, NIT),
FOREIGN KEY (ITEM) REFERENCES ENCARGADO(ITEM)
) ENGINE = InnoDB; 

INSERT INTO REPUESTO VALUES ('R-0001', 'AMORTIGUADOR', 23456760), ('R-0002', 'BUJIA', 23456761);
INSERT INTO ELECTRICO VALUES('R-0002', 200);
INSERT INTO MECANICO VALUES('R-0001', 'ELASTICIDAD 60%');
INSERT INTO PROVEEDOR VALUES ('1011112450', 'JUAN PABLO RUIZ', 75234578 );
INSERT INTO COMPRA VALUES('R-0001', '1011112450', NOW(), 2, 200.0, 20.0, 30.0);
INSERT INTO ENCARGADO VALUES(10010, 'VICTOR CASTEDO', 6456784, 'SUCRE');
INSERT INTO ENTREGA VALUES(101, NOW(), 2, 'R-0001', '1011112450', 10010);	